

## Εννοιολογική Σχεδίαση

Σκοπος του εννοιολογικού σχεδιασμού είναι η δημιουργία μιας περιεκτικής απεικόνισης της βάσης δεδομένων. Για την σχεδιασμό αυτό χρησιμοποιείται το μοντέλο (ή διάγραμμα) οντοτήτων - συσχετίσεων.

### Ορισμοί ΔΟΣ 

***Οντότητες και Κατηγορήματα***

 - **Οντότητες:** 
   Εξ ορισμού είναι μια ανεξάρτητη φυσική ύπαρξη ή αφηρημένη έννοια του πραγματικού κόσμου. Για τον δικο μας σκοπο, ως οντότητα θα σκεφτόμαστε το μοντέλο μας. Π.χ. ο φοιτητής.
   
   Η οντότητα περιέχει στιγμιότυπα. Π.χ. για την οντότητα φοιτητής, ο Γεωργίου.

 - **Κατηγορήματα / Γνωρίσματα οντότητας:**
   Ετσι ονομάζονται τα στοιχεία της οντότητας, ή αλλιώς τα χαρακτηριστικά που την περιγράφουν. Π.χ., για η οντότητα φοιτητής θα μπορούσε να έχει ως κατηγορήματα το όνομα, το τμήμα φοίτησης, την διεύθυνση. 

 - **Είδη Γνωρισμάτων:**
   
   - *Απλά και Σύνθετα:* Κατηγορήματα που περιγράφονται από ένα ή πολλά, διακριτά χαρακτηριστικά. Π.χ. το επώνυμο είναι απλό, ενώ η διεύθυνση είναι σύνθετο, καθώς περιγράφεται από πόλη, οδό, αριθμό.
     
   - *Μονότιμα και Πλειότιμα:* Κατηγορήματα με μια ή πολλές τιμές (σκέψου το σα λίστα). Π.χ. μονότιμο είναι το όνομα, πλειότιμο είναι το τηλέφωνο, καθώς μπορεί να περιέχει κινητό, σταθερό, τηλέφωνο εργασίας.
 
 - **Πρωτεύοντα και Υποψήφια Κλειδιά:**
   Ενα κλειδί είναι ένα κατηγόρημα ή ένα σύνολο κατηγορημάτων που χρησιμοποιείται ως σημείο αναφοράς για το στιγμιότυπο. Αν ξέρω αυτό, ξέρω και το στιγμιότυπο. Π.χ. για τον πολίτη μπορεί να είναι το ΑΦΜ. 
   
   - *Υποψήφια κλειδιά:* Τα μοναδικά κατηγορήματα της οντότητας.
   - *Πρωτεύον κλειδί:* Απ΄ τα υποψήφια κλειδιά διαλέγω αυτό με τα λιγότερα κατηγορήματα. Το υποχρεωτικό αυτό κλειδί λέγεται πρωτεύον κλειδί.

 - **Συσχετίσεις και Στιγμιότυπα Συσχετίσεων:**
   Η συσχέτιση "ενώνει" τα στιγμιότυπα. Ουσιαστικά είναι ενέργειες μεταξύ τους. Είναι ουσιαστικά μια οντότητα που μπαίνει ενδιάμεσα σε 2 άλλες οντότητες, και χρησιμοποιείται ως σημείο αναφοράς για το ποιό / -ά στιγμιότυπο / -α της μιας οντότητας αντιστοιχεί σε ποιό / -ά στιγμιότυπο / -α της άλλες οντότητας.
   
   Μια συσχέτιση μπορεί να έχει κατηγορήματα, καθώς δεν είναι παρά ένας ενδιάμεσος πίνακας.

 - **Πληθικότητες Συσχετίσεων:**
   - *1:1:* Ένα στιγμιότυπο της μιας οντότητας μπορεί να συσχετιστεί δυνητικά με ένα στιγμιότυπο της άλλης οντότητας, και vice versa.
   - *1:Ν:* Ένα στιγμιότυπο της πρώτης οντότητας μπορεί να συσχετιστεί δυνητικά με πολλά στιγμιότυπα της δεύτερης οντότητας, και ένα στιγμιότυπο της δεύτερης οντότητας μπορεί να συσχετιστεί με το πολύ ένα στιγμιότυπο της πρώτης.
   - *Μ:Ν:* Ένα στιγμιότυπο της πρώτης οντότητας μπορεί να συσχετιστεί δυνητικά με πολλά στιγμιότυπα της δεύτερης οντότητας, και ένα στιγμιότυπο της δεύτερης οντότητας μπορεί να συσχετιστεί δυνητικά με πολλά στιγμιότυπα της πρώτης.

 - **Συμμετοχή μιας Συσχέτισης:**
   - *Ολική Συμμετοχή:* Κάθε στιγμιότυπο μιας οντότητας συμμετέχει σε τουλάχιστον ένα στιγμιότυπο της συσχέτισης (π.χ. κάθε δάνειο πρέπει να έχει έναν πελάτη)
   - *Μερική Συμμετοχή:* Μπορεί να υπάρχουν στιγμιότυπα της οντότητας που δεν συμμετέχουν σε καμιά συσχέτιση (δεν απαιτείται κάθε πελάτης να έχει δάνειο)

 - **Κληρονομικότητα και συσχέτιση τύπου Is-a:**
   Η υποκλάση κληρονομεί τα γνωρίσματα της γονικής κλάσης.
   
   
 - **Επικαλυπτόμενες και μη Οντότητες**
   - *Επικαλυπτόμενες Οντότητες:* Ενα στιγμιοτυπο μπορει να ανηκει σε πανω απο μια οντοτητες - παιδια.
   - *Μη-Επικαλυπτόμενες Οντότητες:* Ενα στιγμιοτυπο μπορει να ανηκει το πολυ μια οντοτητα - παιδι
   
   Ουσιαστικά η διαφορά έγγυται στο αν μπορεί ένα στιγμιότυπο να ανήκει σε παραπάνω από μια υποκλασεις.

   
 - 

   

### Σχεδιασμός ΔΟΣ 

#### Σύμβολα

| Έννοια          | Περιγραφή Συμβόλου                                                                                                                                                                                                                                                                                          |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Οντότητα        | Ορθογώνιο Παραλληλόγραμμο<br><br>Ορθογώνιο Παραλληλόγραμμο και μέσα άλλο ένα Ορθογώνιο Παραλληλόγραμμο για ασθενή οντότητα                                                                                                                                                                                  |
| Κατηγορήματα    | Κύκλος / Έλλειψη<br><br>Έλλειψη μέσα σε έλλειψη για πλειότιμο κατηγόρημα                                                                                                                                                                                                                                    |
| Πρωτεύον κλειδί | Υπογραμμίζουμε το κείμενο εντός της έλλειψης                                                                                                                                                                                                                                                                |
| Συσχέτιση       | Ρόμβος<br><br>Ρόμβος μέσα σε Ρόμβο για προσδιορίζουσα σχέση                                                                                                                                                                                                                                                 |
| Πληθικότητα     | Τα παραπάνω (κατηγορήματα με οντότητες, οντότητες με συσχετίσεις) ενώνονται με γραμμή. Πάνω από αυτή την γραμμή, κοντά στην οντότητα, γράφουμε τον αριθμό της συσχέτισης                                                                                                                                    |
| Υποκλάσεις      | Κάτω από την γονική κλάση βάζω ένα ανάποδο τρίγωνο, που γράφει Is-a μέσα. Απο κάτω απ' το τρίγωνο μπαίνουν οι υποκλάσεις, και αυτά ενώνονται με γραμμή ξανά.<br><br>Ενας άλλος τρόπος είναι να βάζω στην θέση του Is-a κυκλάκι, με d αν οι οντότητες - παιδιά είναι disjoint, αλλιώς o αν είναι overlapping |


#### Βήμα 1: Έυρεση Οντοτήτων

 - Αρχίζω συλλέγοντας τις οντότητες, καθώς και τα κατηγορήματά τους. Συνήθως οι οντότητες αναφαίρονται στο κείμενο με ουσιαστικά (συγγραφέας, σπίτι κτλ)

- Αποφασίζω ποιες οντότητες θα είναι ισχυρές και ποιές ασθενείς (χωρίς δικο της κλειδί)

- Σημειώνω για τον σχεδιασμό πως οι ισχυρές οντότητες μπαίνουν σε ορθογώνιο παραλληλόγραμμο, ενώ οι ασθενείς μπαίνουν σε διπλό ορθογώνιο παραλληλόγραμμο
   
- Αν φτιαχνω επαυξημενο ΔΟΣ, αποφασιζω τις σχεσεις γονεων - παιδιων. Μετα αποφασιζω αν οι οντοτητες παιδια ειναι overlapping ή disjoint μεταξυ τους. Στο σχεδιο, αυτο το δειχνω γραφοντας πρωτα τον πατερα, και απο κατω μια γραμμη με βελος προς τον πατερα, που καταλληγει σε ενα κυκλακι με o ή d αντίστοιχα. Μετα απο αυτο φερνω γραμμες σε καθε οντοτητα - παιδι.

#### Βήμα 2: Έυρεση Κατηγορημάτων

 - Συλλέγω τα κατηγορήματα των παραπάνω οντοτήτων 

 - Αποφασίζω ποια είναι κλειδιά των οντοτήτων. Τα κλειδιά των οντοτήτων υπογραμμίζονται. Αυτό ισχύει και για τα μερικά κλειδιά, τα οποία υπογραμμίζονται με διακεκομμένη γραμμή.
   
 - Χωρίζω τα κατηγορήματα αυτά σε 
   - Απλά, μονότιμα, δηλαδή έχουν μια τιμή, π.χ. όνομα
   - Απλά, πλειότιμα, δηλαδή έχουν πολλές τιμές, π.χ. τηλεφωνικοί αριθμοί
   - Σύνθετα, π.χ. Διεύθυνση ---> Οδός, Αριθμός κτλ
   - Αποθηκευόμενα ή παραγόμενα. δηλαδή κατηγορήματα που προκύπτουν από άλλα.
   
Τα κατηγορήματα μπαίνουν σε έλλειψη. Συγκεκριμένα μπαίνουν σε
- Έλλειψη αν είναι  απλά, μονής τιμής
- Έλλειψη με γραμμές που πάνε σε άλλες ελλείψεις αν είναι σύνθετα, μονής τιμής
- Διπλή έλλειψη (μια μέσα στην άλλη) αν είναι απλά, πολλαπλών τιμών


#### Βήμα 3: Ένωση όλων

 - Για κάθε οντότητα, αποφασίζω αν η συμμετοχή της στην συσχέτιση είναι ολική ή μερική. Σημειώνεται με διπλή ή μονή γραμμή αντίστοιχα 
 - Αποφασίζω τον αριθμο μεταξυ των οντότητα - συσχέτιση - οντότητα






## Λογική Σχεδίαση




## Μετάβαση από ΔΟΣ σε περιγραφή απαιτήσεων - προδιαγραφών

### Ορισμοί

 - **Οντότητες:** 
   - *Ισχυρή Οντότητα:* Ισχυρή ονομάζουμε κάθε οντότητα που περιέχει πρωτεύον κλειδί
   - *Ασθενής Οντότητα:* Δεν πληροί το παραπάνω κριτήριο, διαθέτει όμως ένα υποσύνολο κατηγορημάτων (μερικό κλειδί - διευκρινιστής) που συνδιαζόμενο με το κλειδί άλλου τύπου οντοτήτων, είναι ικανό να αποτελέσει κλειδί. Π.χ., ένα ανήλικο τέκνο δεν έχει ΑΦΜ, αλλά το όνομά του, σε συνδιασμό με το ΑΦΜ του γονέα του, μπορεί να δουλέψει ως μερικό κλειδί. Στο ΔΟΣ υπογραμμίζεται και αυτό 
 
 - **Κλειδιά**   
   - *Ξένο Κλειδί:* Μια ασθενής οντότητα, για να σταθεί, χρειάζεται να συνδέετε με μια ισχυρή. Π.χ. φοιτητής με γονέα. Το κλειδί της ισχυρής οντότητας καταχωρείτε ως πεδίο στον πίνακα της ασθενούς, για να δηλώσει την συσχέτιση (ποιός γονέας αντιστοιχεί σε ποιό παιδί π.χ.). Αυτό το κλειδί ονομάζεται ξένο.
   - *Μερικό Κλειδί:* 
   
   
 -  **Προσεγγίσεις:**
   Υπάρχουν διαφορετικές προσεγγίσεις, που μας οδηγούν σε διαφορετικό σχεσιακό μοντέλο.
   
   - *Συντηρητική Προσέγγιση:* Δημιουργεί μια νέα συσχέτιση, που περιέχει ως πεδία τα κλειδιά και των 2 συσχετίσεων, συν τα δικά της. 
   - *Προσέγγιση των Απορροφήσεων:* 
   - *Αυστηρή Προσέγγιση:*  

### Κανόνες Αντιστοίχισης

- ***Απεικόνιση Ισχυρών Οντοτήτων:***
  Για κάθε ισχυρή οντότητα που υπάρχει στο ΔΟΣ δημιουργούμε έναν πίνακα, με πεδία όλα τα απλά και μονότιμα κατηγορήματα της οντότητας. Σε κάθε τέτοιον πίνακα ορίζουμε το πρωτεύον κλειδί (απλό ή σύνθετο, δηλαδή σύνολο παραπάνω από ενός πεδίων) υπογραμμίζοντάς το.

- ***Απεικόνιση Ασθενών Οντοτήτων:***
  Για κάθε ασθενή οντότητα που υπάρχει στο ΔΟΣ δημιουργούμε έναν πίνακα, με πεδία όλα τα απλά κατηγορήματα της οντότητας. Ο πίνακας αυτός περιέχει επιπλέον ως νέο πεδίο (ξένο κλειδί) το πρωτεύον κλειδί της ισχυρής οντότητας στην οποία αντιστοιχίζεται η ασθενής αυτή οντότητα. Πρωτεύον κλειδί του νέου μας πίνακα είναι ο συνδιασμός του μερικού κλειδιού της, αν υπάρχει, και του ξένου κλειδιού που προαναφέραμε.






   
  

### Μεθόδοι μετάβασης





## Σχεσιακή Άλγεβρα

Η σχεσιακή άλγεβρα είναι ένας τρόπος δημιουργίας νέων σχέσεων από παλιές. 

Οι πράξεις της σχεσιακής άλγεβρας:

 - Πράξεις που αφαιρούν κομμάτια από μια σχέση, είτε επιλέγοντας γραμμές είτε προβάλλοντας στήλες.
 - Οι συνηθισμένες πράξεις συνόλου - ένωση, τομή, διαφορά.
 - Πράξεις που συνδιάζουν πλειάδες από 2 σχέσεις
- Μετονομασία γνωρισμάτων.
   
**Η πράξη επιλογής (select)**

Επιλογή ενός υποσυνόλου των πλειάδων μιας σχέσης που ικανοποιεί μια συνθήκη.

$σ_{<\text{συνθήκη επιλογής}>}(<\text{όνομα σχέσης}>)$  

Οι συνθήκες συνδέονται με τα AND, OR, NOT

Για παράδειγμα, $σ_{\text{διάρκεια} > 100 \text{ AND χρονολογία} > 1996}(\text{Ταινία})$

**Η πράξη της προβολής (project)

Επιλογή συγκεκριμένων στηλών (γνωρισμάτων)

$π_{<\text{λίστα γνωρισμάτων}>}(<\text{όνομα σχέσης}>)$

Για παράδειγμα, $π_{\text{διάρκεια}}(\text{Ταινία})$ ή $π_{\text{διάρκεια}}(σ_{\text{διάρκεια} > 100 \text{ AND χρονολογία} > 1996}(\text{Ταινία}))$

Στην δεύτερη, "σύνθετη" σχέση, πρώτα εκτελείται η πράξη μέσα στην παρένθεση

**Πράξεις Συνόλου**

Δυο σχέσεις είναι συμβατές ως προς την ένωση αν έχουν τον ίδιο βαθμό $n$ και $\forall i, dom(A_i) = dom(B_i)$. Δηλαδή ίδιο βαθμό πεδίων και ίδιο πεδίο ορισμού

**Καρτεσιανό γινόμενο (Cross product ή cross join):**
$R(A_1, A_2, \dots, A_n) \times S(B_1, B_2, \dots, B_m)$ αποτέλεσμα η σχέση $Q: Q(A_1, A_2, \dots, A_n, B_1, B_2, \dots, B_m)$

Έχει $n + m$ γνωρίσματα και $n_R * n_S$ πλειάδες.

$A \times B = B \times A$

**Φυσική Συνένωση (natural join):**
Δημιουργώ έναν πίνακα με τις γραμμές όπου τα στοιχεία των κοινών στηλών είναι ίδια. Τα κοινά στοιχεία εμφανίζονται μια φορά.



## Αγγλοελληνικό Γλωσσάρι

| Ελληνική Ορολογία               | Αγγλική Ορολογία            |
| ------------------------------- | --------------------------- |
| Διάγραμμα Οντοτήτων Συσχετήσεων | Entity Relationship Diagram |
|                                 |                             |
